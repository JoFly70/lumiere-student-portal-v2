# Flight Deck â€” Student Progress (Cockpit)

**Status:** v1.0 (ready for build)
**Scope:** Replace current â€œDashboardâ€ with a cockpitâ€‘style **Flight Deck**. Summarizes progress, pace, time, and cost at a glance. Roadmap remains a separate page (**Course Map**).

---

## 0) Design Principles

* **Atâ€‘aâ€‘glance:** No scrolling needed to grasp status (credits, time left, cost trajectory).
* **Visual first:** Gauges and charts lead; numbers confirm.
* **Deterministic math:** Single source of truth for totals. No divergent calculations in cards vs tables.
* **Oneâ€‘year rule:** Timeline > 12 months triggers a visible warning and cost impact note.
* **Modelâ€‘aware costs:** If UMPI model is chosen, highlight $1,800/session as the primary driver of overage.
* **Roleâ€‘safe:** Student view only; no admin artifacts visible.

---

## 1) Page Identity & Navigation

* **Route:** `/flight-deck`
* **Sidebar Label:** Flight Deck
* **Header Title:** *Flight Deck â€” Your Degree at a Glance*
* **Subheader:** *Track credits, pace, time, and costs in real time.*
* **Primary CTA (top-right):** **View Full Course Map â†’** (links to `/course-map`)

---

## 2) Layout (Figma-ready)

* **Grid:** 12â€‘column responsive grid, 24px gutter, 24px outer padding.
* **Above-the-fold height target:** ~720â€“840px (no scroll on most laptops).

### 2.1 Top Bar â€” Flight Summary (full width, fixed height ~72px)

* **Content (left to right):**

  * **Status line (bold):** `ğŸ“˜ {completed}/{TARGET_120} credits  |  â± {eta_months} months left  |  ğŸ’° {cost_state}`
  * **Cost state pill:** On Track (green) / Caution (yellow) / Over Budget (red).
  * **Right actions:** `View Full Course Map â†’`
* **Behavior:** Re-computes on data change with subtle fade/slide animation.

### 2.2 Two-Panel Body (equal columns)

**Left Panel â€” Progress** (6 columns)

* **Card A: Credit Completion Donut** (height ~260)

  * Center label: **`{completed} / 120`**
  * Segments: Completed (green), In-progress (blue), Remaining (neutral gray)
  * Microâ€‘animates on update (easeâ€‘out fill)
* **Card B: Pace Gauge (Speedometer)** (height ~220)

  * Needle shows *hours/week vs target* (e.g., 10/12)
  * Zones: green (>= target), yellow (within 20%), red (<80% of target)
  * Caption: *â€œStudy pace this weekâ€*
* **Card C: Timeline Strip (Oneâ€‘Year Bar)** (height ~120)

  * 12 segments = 12 months; filled to `eta_months`.
  * If `eta_months > 12`, the overflow segment turns **red** with tooltip: â€œExceeds 12 months â€” added UMPI session likely (+$1,800).â€
  * Secondary caption: *â€œIdeal completion â‰¤ 12 monthsâ€*

**Right Panel â€” Financial** (6 columns)

* **Card D: Cost Composition (Stacked Bar)** (height ~260)

  * Stacks: Lumiere fee, Provider courses, UMPI sessions
  * Tooltip shows absolute + % of total
  * Footer miniâ€‘legend with amounts
* **Card E: Total & Trend** (height ~120)

  * Big number: **Projected Total: ${projected_total}**
  * Trend chevron: Up (red), flat (gray), down (green) based on latest pace deltas
  * Subtext: *â€œChange since last week: ${delta_total}â€*
* **Card F: Payments Sparkline** (height ~220)

  * Cumulative payments over time (monthly points)
  * Footer text: *â€œPaid to date: ${paid_to_date} â€¢ Remaining: ${remaining_balance}â€*

### 2.3 Bottom Strip â€” Insights & Alerts (full width, height ~120)

* **Dynamic Insight Sentence (left):**

  * *â€œAt this pace, youâ€™ll finish in **{eta_months} months** and pay **${projected_total}**.â€*
* **Smart Tip (center):**

  * *â€œAdd {delta_hours} hrs/week to avoid one extra UMPI session (~$1,800).â€*
* **Alert Icons (right):**

  * Red: >12 months; Yellow: pace below target; Green: on track
  * Each icon has a tooltip explaining the state

---

## 3) Data & Logic (Deterministic Model)

> Centralize all computations so every widget reads the same source.

### 3.1 Credits

* **TARGET_CREDITS = 120.**
* **completedCredits** = sum of *unique* completed course credits.
* **inProgressCredits** = sum of unique inâ€‘progress course credits.
* **remainingCredits = max(0, 120 - completedCredits - inProgressCredits).*
* **Donut segments:** completed / inProgress / remaining.
* **Warning:** If `completedCredits + inProgressCredits > 120`, show a tiny chip: â€œOver target by {over} â€” review plan.â€

### 3.2 Pace

* **paceHours** = tracked/entered weekly study hours (rolling average, last 2â€“4 weeks).
* **targetHours** = program default (e.g., 12 hrs/week) but editable per student.
* **Pace State:**

  * Green: paceHours â‰¥ targetHours
  * Yellow: paceHours â‰¥ 0.8 * targetHours
  * Red: paceHours < 0.8 * targetHours

### 3.3 Time to Completion (ETA)

* **etaMonths** (deterministic): derived from remaining credits and pace:

  * **effectiveMonthlyThroughput** = (paceHours / hoursPerCredit)
  * **hoursPerCredit default** = 15 (adjustable per provider if needed)
  * **etaMonths = ceil( remainingCredits / (effectiveMonthlyThroughput * 4.3 weeks) )**
* **Oneâ€‘Year Rule:** If `etaMonths > 12`, set Alert.Red and pass a cost hint to financial model (see 3.5).

### 3.4 Cost Composition

* **Inputs:**

  * `lumiereFeeUpfront` (secured upfront)
  * `providerCostMonthly` (range or chosen plan)
  * `providerMonths` (derived from ETA or fixed cap)
  * `umpiSessionCost = 1800`
  * `projectedUmpiSessions` (see below)
* **Projected UMPI Sessions:**

  * Base: 2 sessions if remaining UL/major credits â‰¤ 30
  * +1 session if ETA spills over into additional term windows or UL shortfall
  * **If oneâ€‘year rule is violated**, tentatively increment sessions by +1 (show as assumption in tooltip)
* **Projected Total:**

  * `projectedTotal = lumiereFeeUpfront + (providerCostMonthly * providerMonths) + (umpiSessionCost * projectedUmpiSessions)`
* **Deterministic rounding:** Only round at display time; keep internal floats for math.

### 3.5 Trend & Deltas

* Compare current projection vs last weekâ€™s snapshot.
* **deltaTotal = currentProjectedTotal - lastWeekProjectedTotal**
* Trend chevron direction from sign of delta; magnitude used in subtext.

### 3.6 Payments Sparkline

* Source: payment ledger (date, amount). Compute `paidToDate` and `remainingBalance = projectedTotal - paidToDate`.
* If ledger absent, hide sparkline and show placeholder text.

### 3.7 Alerts

* **Red:** etaMonths > 12 OR projectedUmpiSessions increased from baseline
* **Yellow:** pace below target within 20%
* **Green:** on track (none of the above)

---

## 4) Corrections vs Current Screenshots (Must Fix)

1. **Unify cost math** â€” ensure Est. Cost, Projected Total, and schedule rollâ€‘up all read from the *same function* and match exactly.
2. **Credit count** â€” fix â€œ121 credits, 0 remaining.â€ Show `{completed}/{120}` + remaining calculation; warn if over target.
3. **Deduplicate courses** â€” no duplicate codes in any totals.
4. **Avatar presence** â€” not core to this page, but keep sidebar/profile working. Auth screens will render avatar preview (handled elsewhere).
5. **Role leakage** â€” no Admin routes or labels in student view.
6. **Finance disclaimer** â€” small muted line below financial cards: *â€œTotals vary by pace, exam options, provider mix, and university sessions; numbers are estimates.â€*

---

## 5) States & Interactions

* **Load state:** skeleton placeholders for each card (no layout shift).
* **Empty state:** if no payments yet, sparkline shows dashed baseline + â€œNo payments recorded yet.â€
* **Update animations:** 200â€“300ms ease on gauge/Donut fill and number tick.
* **Tooltips:** concise explanations on alerts and cost assumptions (e.g., extra UMPI session).
* **Accessibility:**

  * All charts have numeric equivalents (ariaâ€‘labels with exact numbers and states).
  * Keyboard focus outlines on CTA and alert icons.

---

## 6) Acceptance Criteria (QA)

* **Above-the-fold** shows: credits donut, pace gauge, timeline strip, stacked cost bar, projected total card, payments sparkline, insights & alerts, CTA to Course Map.
* **Oneâ€‘year rule** triggers a red alert and adjusts projected sessions by +1 in the cost model (visible in tooltip).
* **All totals match** across cards and insights; rounding is consistent.
* **Trend arrow** reflects weekâ€‘overâ€‘week change with correct delta text.
* **Performance:** first render <1s on average data; no jank on updates.
* **Print view:** hides interactive hover states; retains key numbers and disclaimer.

---

## 7) Data Contract (what this page needs)

```
studentProfile: {
  name, avatar_url, targetHours (default 12), model: "UMPI" | "Other"
}
progress: {
  completedCredits, inProgressCredits, uniqueCodes: string[]
}
pace: {
  weeklyHoursAvg, hoursPerCredit (default 15)
}
financials: {
  lumiereFeeUpfront, providerCostMonthly, paymentLedger: Array<{date, amount}>
}
planHints: {
  remainingULCredits, baselineUmpiSessions
}
priorSnapshots: {
  lastWeekProjectedTotal
}
```

---

## 8) Content & Copy (final text)

* Header: **Flight Deck â€” Your Degree at a Glance**
* Subheader: *Track credits, pace, time, and costs in real time.*
* Cost disclaimer (muted, 12â€“13px): *Totals vary by pace, exam options, provider mix, and university sessions; numbers are estimates.*
* Tooltip (oneâ€‘year overflow): *â€œExceeds 12 months â€” additional UMPI session (~$1,800) likely.â€*
* Smart Tip example: *â€œAdd 3 hrs/week to save one UMPI session (~$1,800).â€*

---

## 9) Telemetry (optional but recommended)

* Track changes in weeklyHoursAvg, targetHours edits, and clicks to Course Map.
* Weekly snapshot job writes `projectedTotal` for trend comparisons.

---

## 10) Build Plan (Replit â€” no code here)

1. **Create the page shell** at `/flight-deck`; wire the CTA to `/course-map`.
2. **Centralize math** into a single utility used by all cards (credits, ETA, costs, trend).
3. **Render charts** with accessible numeric fallbacks; wire to centralized data.
4. **Hook data** from profile, progress, financials, plan hints, prior snapshot.
5. **QA pass** against Acceptance Criteria; verify oneâ€‘year rule & UMPI cost behavior.
6. **Polish** motion & tooltips; confirm print layout readability.

---

## 11) Future Enhancements (v1.1)

* Pace slider (whatâ€‘if): dynamically simulate hours/week and show instant impact on ETA and sessions.
* Benchmarks: cohort averages for pace and completion time.
* Coach nudge: oneâ€‘click suggestion that posts a tip to student inbox.
